{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "pylint: whole project",
      "dependsOn": "install_requirements",
      "type": "shell",
      "command": "${command:python.interpreterPath}",
      "args": [
        "-m",
        "pylint",
        "--msg-template",
        "\"{path}:{line}:{column}:{category}:{symbol} - {msg}\"",
        "${workspaceFolder}"
      ],
      "presentation": {
        "reveal": "never",
        "panel": "shared"
      },
      "problemMatcher": {
        "owner": "python",
        "fileLocation": [
          "relative",
          "${workspaceFolder}"
        ],
        "pattern": {
          "regexp": "^(.+):(\\d+):(\\d+):(\\w+):(.*)$",
          "file": 1,
          "line": 2,
          "column": 3,
          "severity": 4,
          "message": 5
        }
      }
    },
    {
      "label": "Python: lint entire project with mypy",
      "dependsOn": "install_requirements",
      "type": "shell",
      "command": "${command:python.interpreterPath}",
      "args": [
        "-m",
        "mypy",
        "--no-pretty",
        "--show-column-numbers",
        "--package",
        "pykotor",
        "--check-untyped-defs"
      ],
      "group": "test",
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "problemMatcher": {
        "owner": "python",
        "fileLocation": [
          "relative",
          "${workspaceFolder}"
        ],
        "pattern": {
          "regexp": "^(.+):(\\d+):(\\d+): (\\w+): (.*)$",
          "file": 1,
          "line": 2,
          "column": 3,
          "severity": 4,
          "message": 5
        }
      }
    },
    {
      "label": "Python: Ruff check entire project",
      "dependsOn": "install_requirements",
      "type": "shell",
      "command": "${command:python.interpreterPath}",
      "args": [
        "-m",
        "ruff",
        "check",
        ".",
        "--ignore=D101,D102,D103,D107,D205,D417,D205,PLR5501,PLW2901"
      ],
      "group": "test",
      "presentation": {
        "reveal": "always",
        "panel": "new"
      },
      "problemMatcher": {
        "owner": "python",
        "fileLocation": [
          "relative",
          "${workspaceFolder}"
        ],
        "pattern": {
          "regexp": "^(.+):(\\d+):(\\d+): (\\w+): (.*)$",
          "file": 1,
          "line": 2,
          "column": 3,
          "severity": 4,
          "message": 5
        }
      }
    },
    {
      "label": "install_requirements",
      "type": "shell",
      "command": "${command:python.interpreterPath}",
      "args": [
        "-m",
        "pip",
        "install",
        "-r",
        "requirements.txt"
      ],
      "presentation": {
        "echo": true,
        "reveal": "always"
      },
      "problemMatcher": []
    },
    {
      "label": "Build HoloPatcher",
      "type": "shell",
      "command": "pyinstaller",
      "args": [
        "--noconsole",
        "--onefile",
        "--clean",
        "--name=holopatcher",
        "--path=${workspaceFolder}",
        "--icon=resources/icons/patcher_icon_v2.png",
        "scripts/holopatcher/__main__.py"
      ],
      "problemMatcher": []
    },
    {
      "label": "Build Toolset (Windows)",
      "type": "shell",
      "command": "pyinstaller",
      "args": [
        "--noconsole",
        "--onefile",
        "--clean",
        "--name=HolocronToolset",
        "--path=${workspaceFolder}`;${workspaceFolder}\\toolset",
        "--icon=resources/icons/sith.ico",
        "toolset/__main__.py"
      ],
      "problemMatcher": []
    },
    {
      "label": "Build Toolset (Unix)",
      "type": "shell",
      "command": "pyinstaller",
      "args": [
        "--noconsole",
        "--onefile",
        "--clean",
        "--name=HolocronToolset",
        "--path=${workspaceFolder}:${workspaceFolder}/toolset",
        "--icon=resources/icons/sith.ico",
        "toolset/__main__.py"
      ],
      "problemMatcher": []
    },
    {
      "label": "Build KotorDiff",
      "type": "shell",
      "command": "pyinstaller",
      "args": [
        "--console",
        "--onefile",
        "--clean",
        "--name=kotordiff",
        "--path=${workspaceFolder}",
        "scripts/kotordiff/__main__.py"
      ],
      "problemMatcher": []
    },
    {
      "label": "Build GUI Creator",
      "type": "shell",
      "command": "pyinstaller",
      "args": [
        "--console",
        "--onefile",
        "--clean",
        "--name=gui_creator",
        "--path=${workspaceFolder}",
        "scripts/guicreator/__main__.py"
      ],
      "problemMatcher": []
    }
  ]
}
